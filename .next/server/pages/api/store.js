"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/store";
exports.ids = ["pages/api/store"];
exports.modules = {

/***/ "facebook-nodejs-business-sdk":
/*!***********************************************!*\
  !*** external "facebook-nodejs-business-sdk" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("facebook-nodejs-business-sdk");

/***/ }),

/***/ "./pages/api/store.js":
/*!****************************!*\
  !*** ./pages/api/store.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ userHandler)\n/* harmony export */ });\nconst bizSdk = __webpack_require__(/*! facebook-nodejs-business-sdk */ \"facebook-nodejs-business-sdk\");\nconst AdAccount = bizSdk.AdAccount;\n//keys accessed from env.local files\nconst access_token = process.env.ACCESS_TOKEN;\nconst account_id = process.env.ACCOUNT_ID;\nconst api = bizSdk.FacebookAdsApi.init(access_token);\nconst account = new AdAccount(account_id);\nasync function userHandler(req, res) {\n    const { body , method  } = req;\n    switch(method){\n        case 'POST':\n            // create campaign and ad set of the created campaign\n            try {\n                let params;\n                params = {\n                    'name': `Campaign ${body.name}`,\n                    'objective': 'POST_ENGAGEMENT',\n                    'status': 'PAUSED',\n                    'special_ad_categories': []\n                };\n                const campaign = await account.createCampaign([], params);\n                params = {\n                    'name': `AdSet ${body.name}`,\n                    'lifetime_budget': '2000000',\n                    'start_time': '2021-11-16T11:38:19-0700',\n                    'end_time': '2021-11-18T11:38:19-0700',\n                    'campaign_id': campaign._data.id,\n                    'bid_amount': '500',\n                    'billing_event': 'IMPRESSIONS',\n                    'optimization_goal': 'POST_ENGAGEMENT',\n                    'targeting': {\n                        'age_min': body.minAge,\n                        'age_max': body.maxAge,\n                        'genders': [\n                            body.gender\n                        ],\n                        'geo_locations': {\n                            'countries': [\n                                body.country\n                            ],\n                            'regions': [\n                                {\n                                    'key': body.region\n                                }\n                            ]\n                        }\n                    },\n                    'status': 'PAUSED'\n                };\n                //await account.createAdSet([],params); // comment this line if facing issue with standbox access token\n                res.status(200).json({\n                    status: 200,\n                    campaign_id: campaign._data.id\n                });\n            } catch (err) {\n                res.status(402).json({\n                    status: 402,\n                    error: err.message\n                });\n            }\n            break;\n        default:\n            res.setHeader('Allow', [\n                'POST'\n            ]);\n            res.status(405).end(`Method ${method} Not Allowed`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQU8sUUFBRSxDQUFDO2dCQUFBLENBQU07WUFBQSxDQUFDO1lBQy9CcEIsR0FBRyxDQUFDYyxNQUFNLENBQUMsR0FBRyxFQUFFTyxHQUFHLEVBQUUsT0FBTyxFQUFFbkIsTUFBTSxDQUFDLFlBQVk7O0FBRXZELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYWNlYm9vay1jYW1wYWlnbi1hcGkvLi9wYWdlcy9hcGkvc3RvcmUuanM/NGI3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBiaXpTZGsgPSByZXF1aXJlKCdmYWNlYm9vay1ub2RlanMtYnVzaW5lc3Mtc2RrJyk7XHJcbmNvbnN0IEFkQWNjb3VudCA9IGJpelNkay5BZEFjY291bnQ7XHJcblxyXG4vL2tleXMgYWNjZXNzZWQgZnJvbSBlbnYubG9jYWwgZmlsZXNcclxuY29uc3QgYWNjZXNzX3Rva2VuID0gcHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOO1xyXG5jb25zdCBhY2NvdW50X2lkID0gcHJvY2Vzcy5lbnYuQUNDT1VOVF9JRDtcclxuXHJcbmNvbnN0IGFwaSA9IGJpelNkay5GYWNlYm9va0Fkc0FwaS5pbml0KGFjY2Vzc190b2tlbik7XHJcbmNvbnN0IGFjY291bnQgPSBuZXcgQWRBY2NvdW50KGFjY291bnRfaWQpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gdXNlckhhbmRsZXIocmVxLCByZXMpIHtcclxuICAgICAgICBcclxuICAgIGNvbnN0IHtib2R5LG1ldGhvZH0gPSByZXFcclxuXHJcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xyXG4gICAgICBjYXNlICdQT1NUJzpcclxuICAgICAgICAvLyBjcmVhdGUgY2FtcGFpZ24gYW5kIGFkIHNldCBvZiB0aGUgY3JlYXRlZCBjYW1wYWlnblxyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgbGV0IHBhcmFtcztcclxuICAgICAgICAgICAgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgJ25hbWUnIDogYENhbXBhaWduICR7Ym9keS5uYW1lfWAsXHJcbiAgICAgICAgICAgICAgICAnb2JqZWN0aXZlJyA6ICdQT1NUX0VOR0FHRU1FTlQnLFxyXG4gICAgICAgICAgICAgICAgJ3N0YXR1cycgOiAnUEFVU0VEJyxcclxuICAgICAgICAgICAgICAgICdzcGVjaWFsX2FkX2NhdGVnb3JpZXMnIDogW10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbXBhaWduID0gYXdhaXQgYWNjb3VudC5jcmVhdGVDYW1wYWlnbihbXSxwYXJhbXMpO1xyXG4gICAgICAgICAgICBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAnbmFtZScgOiBgQWRTZXQgJHtib2R5Lm5hbWV9YCxcclxuICAgICAgICAgICAgICAgICdsaWZldGltZV9idWRnZXQnOiAnMjAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAnc3RhcnRfdGltZScgOiAnMjAyMS0xMS0xNlQxMTozODoxOS0wNzAwJyxcclxuICAgICAgICAgICAgICAgICdlbmRfdGltZScgOiAnMjAyMS0xMS0xOFQxMTozODoxOS0wNzAwJyxcclxuICAgICAgICAgICAgICAgICdjYW1wYWlnbl9pZCcgOiBjYW1wYWlnbi5fZGF0YS5pZCxcclxuICAgICAgICAgICAgICAgICdiaWRfYW1vdW50JyA6ICc1MDAnLFxyXG4gICAgICAgICAgICAgICAgJ2JpbGxpbmdfZXZlbnQnIDogJ0lNUFJFU1NJT05TJyxcclxuICAgICAgICAgICAgICAgICdvcHRpbWl6YXRpb25fZ29hbCcgOiAnUE9TVF9FTkdBR0VNRU5UJyxcclxuICAgICAgICAgICAgICAgICd0YXJnZXRpbmcnIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICdhZ2VfbWluJzpib2R5Lm1pbkFnZSxcclxuICAgICAgICAgICAgICAgICAgICAnYWdlX21heCc6Ym9keS5tYXhBZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dlbmRlcnMnOltib2R5LmdlbmRlcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dlb19sb2NhdGlvbnMnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50cmllcyc6W2JvZHkuY291bnRyeV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZWdpb25zJzpbeydrZXknOiBib2R5LnJlZ2lvbn1dXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdzdGF0dXMnIDogJ1BBVVNFRCcsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vYXdhaXQgYWNjb3VudC5jcmVhdGVBZFNldChbXSxwYXJhbXMpOyAvLyBjb21tZW50IHRoaXMgbGluZSBpZiBmYWNpbmcgaXNzdWUgd2l0aCBzdGFuZGJveCBhY2Nlc3MgdG9rZW5cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe3N0YXR1czoyMDAsIGNhbXBhaWduX2lkOiBjYW1wYWlnbi5fZGF0YS5pZH0pXHJcbiAgICAgICAgfWNhdGNoKGVycil7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAyKS5qc29uKHtzdGF0dXM6IDQwMiwgZXJyb3I6IGVyci5tZXNzYWdlfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKVxyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke21ldGhvZH0gTm90IEFsbG93ZWRgKVxyXG4gICAgfVxyXG4gIH0iXSwibmFtZXMiOlsiYml6U2RrIiwicmVxdWlyZSIsIkFkQWNjb3VudCIsImFjY2Vzc190b2tlbiIsInByb2Nlc3MiLCJlbnYiLCJBQ0NFU1NfVE9LRU4iLCJhY2NvdW50X2lkIiwiQUNDT1VOVF9JRCIsImFwaSIsIkZhY2Vib29rQWRzQXBpIiwiaW5pdCIsImFjY291bnQiLCJ1c2VySGFuZGxlciIsInJlcSIsInJlcyIsImJvZHkiLCJtZXRob2QiLCJwYXJhbXMiLCJuYW1lIiwiY2FtcGFpZ24iLCJjcmVhdGVDYW1wYWlnbiIsIl9kYXRhIiwiaWQiLCJtaW5BZ2UiLCJtYXhBZ2UiLCJnZW5kZXIiLCJjb3VudHJ5IiwicmVnaW9uIiwic3RhdHVzIiwianNvbiIsImNhbXBhaWduX2lkIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIiwic2V0SGVhZGVyIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/api/store.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/api/store.js"));
module.exports = __webpack_exports__;

})();